<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="utf-8">

    <title>Our superheroes</title>

    <link href="https://fonts.googleapis.com/css?family=Faster+One" rel="stylesheet">

    <style>
        button{
            display:block;
        }

        div,
        button{
            margin: 0.5rem 0;
        }
    </style>

</head>

<body>

    <!-- <button id="set-alarm">アラームを設定</button>
    <div id="output"></div> -->

    <div>
        <label for="name">名前：</label>
        <input type="text" id="name" name="name" size="4" value="Matilda" />
    </div>

    <div>
        <label for="delay">待ち時間：</label>
        <input type="text" id="delay" name="delay" size="4" value="1000" />
    </div>

    <button id="set-alarm">アラームを設定</button>
    <div id="output"></div>




    <!-- <script>
        const output = document.querySelector("#output");
        const button = document.querySelector("#set-alarm");

        function setAlarm(){
            setTimeout(() => {
                output.textContent = "起きて！";
            }, 1000);
        }

        button.addEventListener("click", setAlarm);
    </script> -->

    <!-- <script>
        function alarm(person, delay){
            return new Promise((resolve, reject) => {
                if(delay < 0){
                    throw new Error("アラームの待ち時間を待ち時間を負数にすることは出来ません。");
                }
                setTimeout(() => {
                    resolve(`${person} 、起きて！`);
                }, delay);
            });
        }
    </script> -->

    <script>
        const name = document.querySelector("#name");
        const delay = document.querySelector("#delay");
        const button = document.querySelector("#set-alarm");
        const output = document.querySelector("#output");

        // function alarm(person, delay){
        //     return new Promise((resolve, reject) => {
        //         if(delay < 0){
        //             throw new Error("アラームのお待ち時間を負数にすることは出来ません。");
        //         }
        //         setTimeout(() => {
        //             resolve(`${person},起きて！`);
        //         }, delay);
        //     });
        // }

        // button.addEventListener("click", () => {
        //     alarm(name.value, delay.value)
        //         .then((message) => (output.textContent = message))
        //         .catch(
        //             (error) => (output.textContent = `アラームを設定できません: ${error}`),
        //         );
        // });


        function alarm(person, delay){
            return new Promise((resolve, reject) => {
                if(delay < 0){
                    throw new Error("アラームの待ち時間を負数にすることは出来ません。");
                }
                setTimeout(() => {
                    resolve(`${person},起きて！`);
                }, delay);
            });
        }

        button.addEventListener("click", async () => {
            try{
                const message = await alarm(name.value, delay.value);
                output.textContent = message;
            }catch(error) {
                output.textContent = `アラームを設定できません: ${error}`;
            }
        });
    </script>

</body>
</html>


